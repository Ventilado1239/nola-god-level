# üèÜ Nola Analytics - Solu√ß√£o God Level Coder Challenge

Esta √© uma plataforma full-stack de Business Intelligence, constru√≠da para resolver o problema da "Maria": donos de restaurante que possuem milhares de dados mas n√£o conseguem extrair insights acion√°veis de forma r√°pida e flex√≠vel.

A solu√ß√£o √© uma aplica√ß√£o web 100% containerizada (Frontend, Backend, ETL, Banco de Dados) que transforma 500.000+ registros de vendas em uma ferramenta de explora√ß√£o de dados instant√¢nea.

---

## ‚ú® Features Principais

A plataforma vai al√©m de um dashboard fixo e entrega um conjunto de ferramentas que resolvem a dor do usu√°rio, com foco em performance e UX.

### 1. Dashboard de Overview Instant√¢neo

A tela principal (`/dashboard`) carrega em menos de 1 segundo e apresenta:

#### KPIs Essenciais
Faturamento, Pedidos e Ticket M√©dio, com indicadores de varia√ß√£o percentual em rela√ß√£o ao per√≠odo anterior.

#### Tooltips Explicativos
Cada KPI possui um tooltip que explica ao usu√°rio n√£o-t√©cnico *como* a m√©trica √© calculada (ex: "Soma de 'total_revenue' da 'mv_kpis_daily'").

#### Insights Autom√°ticos
Um card que gera insights em linguagem natural (ex: "üìà **Crescimento:** O produto 'X' cresceu R$ Y..."), rodando uma an√°lise no backend.

#### Rankings
M√≥dulos de Top Produtos, Top Canais, e Receita por Hora para identifica√ß√£o r√°pida de padr√µes.

### 2. Fluxo "Insight-A√ß√£o": Clientes em Risco (RFM)

Esta √© a feature de maior valor de neg√≥cio, conectando um insight a uma a√ß√£o.

#### Insight
O dashboard identifica "Clientes em Risco" usando uma an√°lise RFM (Rec√™ncia, Frequ√™ncia) que roda no backend.

#### A√ß√£o
Em vez de ser apenas um n√∫mero, o KPI √© um link. Clicar em "Ver lista ‚Üí" leva o usu√°rio direto para a tela de Explora√ß√£o, j√° filtrada com a lista de clientes que precisam de reengajamento.

### 3. Ferramenta de Explora√ß√£o Flex√≠vel (O Cora√ß√£o da Solu√ß√£o)

A tela `/explore` √© a verdadeira solu√ß√£o para a "dor da flexibilidade" da Maria. Ela permite ao usu√°rio:
* Cruzar qualquer **M√©trica** (Faturamento, Pedidos, Ticket M√©dio).
* Com qualquer **Dimens√£o** (Canal, Loja, Produto, Dia da semana, Hora do dia).
* Visualizar os dados em Gr√°fico de Barras e Tabela Virtualizada.
* Aplicar filtros globais (Data, Loja, Canal).

### 4. Vis√µes Salvas (Business Intelligence Real)

Para transformar a explora√ß√£o em uma ferramenta de neg√≥cio, a feature "Vis√µes Salvas" permite que a Maria salve suas an√°lises customizadas no `localStorage` para carregar com um clique no futuro.

### 5. Heatmap de Hor√°rios de Pico

O dashboard renderiza um Heatmap completo de Receita por Dia da Semana vs. Hora do Dia. Isso √© populado por uma View Materializada espec√≠fica (`mv_heatmap`) para performance m√°xima.

### 6. Polimento de UX & DX

#### Dark Mode
A aplica√ß√£o inteira suporta um tema escuro (usando `next-themes`), salvo no `localStorage`.

#### React Query Caching
O frontend usa React Query (`@tanstack/react-query`) para cache de API, evitando re-fetching desnecess√°rio.

#### Drill-Down Links
KPIs e tabelas usam um componente `DrillLink` que filtra o app e navega para a tela de explora√ß√£o, criando um fluxo de an√°lise intuitivo.

---

## ‚ö° Quick Start (Como Executar)

**Pr√©-requisitos:** Docker e Docker Compose instalados.

O setup √© 100% containerizado e reprodut√≠vel, como solicitado no `FAQ.md` ("Clone, docker compose up, acesse localhost:3000" deve funcionar).

### 1. Iniciar o Banco de Dados

Primeiro, inicie o cont√™iner do PostgreSQL em modo "detached".

```bash
docker compose up -d postgres
2. Gerar Dados e Rodar o ETL
Este √© o passo mais importante e o n√∫cleo da arquitetura de dados. Este comando ir√°:

Gerar ~500.000 vendas com generate_data.py.

Executar o script etl.py para popular as tabelas anal√≠ticas e criar as Views Materializadas (mv_kpis_daily, mv_heatmap, etc.).

Este processo leva de 5 a 15 minutos. Aguarde sua conclus√£o.

Bash

docker compose run --rm data-generator
3. Iniciar a Aplica√ß√£o (API + Frontend)
Ap√≥s a finaliza√ß√£o do passo 2, inicie os servi√ßos da API e do Frontend.

Bash

docker compose up -d backend frontend
4. Acessar a Plataforma
Pronto! A aplica√ß√£o estar√° dispon√≠vel em:

Frontend (UI): http://localhost:8080 Backend (API): http://localhost:8000/docs (Documenta√ß√£o da API)

üß† Decis√µes de Arquitetura
O AVALIACAO.md pedia por "pensamento arquitetural e decis√µes t√©cnicas". Esta se√ß√£o serve como o "Documento de Decis√µes Arquiteturais" solicitado na submiss√£o.

1. Arquitetura de Performance: ETL + Views Materializadas
O requisito mais dif√≠cil era garantir queries r√°pidas (< 1s) sobre um volume de 500k+ registros.

Decis√£o
Em vez de fazer a API consultar as tabelas sales "raw" a cada requisi√ß√£o (o que seria lento), implementei um pipeline de ETL (etl.py).

Como Funciona
Este script transforma os dados brutos em tabelas anal√≠ticas (analytics_sales) e 3 Views Materializadas:

mv_kpis_daily: Para os KPIs principais (Receita, Pedidos) e a an√°lise de RFM.

mv_heatmap: Agrega dados por Dia da Semana e Hora, alimentando o heatmap.

mv_top_products_daily: Alimenta os rankings de produtos.

Resultado
A API (FastAPI) l√™ apenas essas MVs, que s√£o extremamente r√°pidas. Isso garante que o dashboard carregue instantaneamente e resolve o requisito de performance da forma mais profissional e escal√°vel poss√≠vel.

2. Foco na Solu√ß√£o do Problema: Explora√ß√£o + Vis√µes Salvas
O problema da "Maria" n√£o era n√£o ter um dashboard, era n√£o ter flexibilidade. O AVALIACAO.md prioriza "resolver a dor do usu√°rio".

Decis√£o
O cora√ß√£o da aplica√ß√£o n√£o √© o DashboardPage.tsx, mas sim o ExplorePage.tsx.

Como Funciona
Esta tela permite ao usu√°rio cruzar m√©tricas (Faturamento, Pedidos, Ticket) com qualquer dimens√£o (Canal, Loja, Produto, Hora, etc.), respondendo perguntas complexas.

Resultado
Para transformar isso em uma ferramenta de neg√≥cio real, a feature SavedViews.tsx foi implementada. Ela permite que a Maria salve suas an√°lises customizadas no localStorage e as acesse com um clique, resolvendo sua dor central.

3. UX Focada em Insights Acion√°veis (Polimento)
Uma boa solu√ß√£o n√£o apenas mostra dados, ela gera insights e √© agrad√°vel de usar.

Insight de Neg√≥cio (RFM)
O backend implementa uma an√°lise de RFM (api_rfm_analysis) para identificar "Clientes em Risco" (clientes fi√©is que n√£o compram h√° 30+ dias).

Fluxo "Insight-A√ß√£o"
O dashboard (DashboardPage.tsx) n√£o mostra apenas o n√∫mero de clientes em risco. Ele tem um link ("Ver lista ‚Üí") que usa o componente DrillLink.tsx para levar o usu√°rio direto √† tela de Explora√ß√£o (ExplorePage.tsx) j√° filtrada, conectando o insight √† a√ß√£o.

Tooltips de KPI
O KpiCard.tsx possui tooltips que explicam ao usu√°rio n√£o-t√©cnico como cada m√©trica √© calculada.

Dark Mode
A aplica√ß√£o tem um tema escuro (ThemeToggle.tsx) para polimento profissional, com classes dark: aplicadas em todos os componentes.

Cache de API
O frontend usa React Query (app/providers.tsx) para fazer o cache inteligente das requisi√ß√µes, evitando re-fetching desnecess√°rio.
